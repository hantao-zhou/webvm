# Use Debian Buster (i386) as the base image
FROM --platform=i386 i386/debian:buster

# Set non-interactive mode for installations
ARG DEBIAN_FRONTEND=noninteractive

# Update system and install required dependencies
RUN apt update && apt upgrade -y && \
    apt install -y \
    git \
    emacs \
    tmux \
    curl \
    wget \
    unzip \
    bash-completion \
    fonts-powerline && \
    rm -rf /var/lib/apt/lists/*

# Install Spacemacs
RUN git clone https://github.com/syl20bnr/spacemacs ~/.emacs.d

# Install Oh My Tmux
RUN git clone https://github.com/gpakosz/.tmux.git ~/.tmux && \
    ln -s -f ~/.tmux/.tmux.conf ~/.tmux.conf && \
    cp ~/.tmux/.tmux.conf.local ~/.tmux.conf.local

# Install Oh My Bash
RUN bash -c "$(curl -fsSL https://raw.githubusercontent.com/ohmybash/oh-my-bash/master/tools/install.sh)" && \
    echo 'source ~/.bashrc' >> ~/.bash_profile

# Set Bash as default shell
SHELL ["/bin/bash", "-c"]

# Set default command
CMD ["/bin/bash"]
